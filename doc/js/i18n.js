const translations = {
  en: {
    nav_features: "Features",
    nav_screenshots: "Screenshots",
    nav_usage: "How to Use",
    nav_faq: "FAQ",
    nav_download: "Download",
    hero_tagline: "AI Coding Session Monitor for macOS",
    hero_desc: "A lightweight menu bar app that monitors live session activity for Claude Code, Codex, and OpenCode. See what your AI assistants are doing — without switching windows.",
    hero_download: "Download Now",
    hero_source: "View Source",
    features_title: "Features",
    feature_realtime_title: "Real-time Monitoring",
    feature_realtime_desc: "Track the status of all active AI coding sessions directly from your menu bar. See running, awaiting input, idle, and stopped states at a glance.",
    feature_multi_title: "Multi-Tool Support",
    feature_multi_desc: "Works with Claude Code, Codex, and OpenCode out of the box. Monitor all your AI coding assistants from a single unified interface.",
    feature_triple_title: "Triple Data Channels",
    feature_triple_desc: "Three independent monitoring channels — PTY Wrapper, Local Plugins, and Process Scanner — ensure maximum reliability and accuracy.",
    feature_theme_title: "Customizable Appearance",
    feature_theme_desc: "Choose from multiple icon styles (Ring, Particles, Energy Bar, Ice Grid) and color themes to match your personal preferences.",
    feature_plugin_title: "Plugin Management",
    feature_plugin_desc: "Install, update, and manage plugins for Claude Code and OpenCode directly within the app. No manual configuration needed.",
    feature_i18n_title: "Multi-Language",
    feature_i18n_desc: "Native support for English, 中文, 日本語, and 한국어. The interface automatically adapts to your system language.",
    screenshots_title: "Screenshots",
    screenshots_menu_caption: "Menu bar dropdown showing active sessions",
    screenshots_settings_caption: "Settings panel with appearance customization",
    usage_title: "How to Use",
    usage_step1_title: "Install VibeBar",
    usage_step1_desc: "Download the latest DMG from GitHub Releases, open it, and drag VibeBar.app to your Applications folder. Right-click and select Open for first launch.",
    usage_step2_title: "Install Plugins",
    usage_step2_desc: "Open Settings and install plugins for Claude Code and OpenCode with one click. For Codex, the built-in wrapper handles monitoring automatically.",
    usage_step3_title: "Start Coding",
    usage_step3_desc: "Launch your AI coding tools as usual. VibeBar automatically detects sessions and shows their real-time status in the menu bar.",
    usage_step4_title: "Monitor & Customize",
    usage_step4_desc: "Click the menu bar icon to see all active sessions. Open Settings to customize icon styles, color themes, and configure launch at login.",
    usage_alt_title: "Alternative: Use the Wrapper",
    usage_alt_desc: "You can also use the <code>vibebar</code> wrapper command to start your tools with enhanced monitoring:",
    faq_title: "FAQ",
    faq_q1: "Which macOS versions are supported?",
    faq_a1: "VibeBar requires macOS 13 (Ventura) or later.",
    faq_q2: "Does VibeBar affect the performance of my AI tools?",
    faq_a2: "No. VibeBar is extremely lightweight and only reads session state data. It has negligible CPU and memory overhead.",
    faq_q3: "How does VibeBar detect sessions?",
    faq_a3: "VibeBar uses three independent channels: dedicated plugins that hook into tool events, a PTY wrapper that monitors terminal output, and a process scanner as fallback. This triple-layer approach ensures reliable detection.",
    faq_q4: "Can I use VibeBar with tools other than Claude Code, Codex, and OpenCode?",
    faq_a4: "Currently VibeBar supports these three tools. The plugin architecture is designed to be extensible, so more tools may be supported in the future.",
    faq_q5: "Is VibeBar open source?",
    faq_a5: "Yes! VibeBar is fully open source. You can view the code, submit issues, and contribute on GitHub.",
    faq_q6: "How do I update VibeBar?",
    faq_a6: "VibeBar includes automatic update checking. You'll be notified when a new version is available. You can also manually download the latest release from GitHub.",
    footer_desc: "Lightweight macOS menu bar app for monitoring AI coding sessions.",
    footer_links: "Links",
    footer_resources: "Resources",
    footer_github: "GitHub",
    footer_releases: "Releases",
    footer_issues: "Issues",
    footer_license: "License",
    footer_readme: "README",
    footer_agents: "AGENTS.md",
    footer_copyright: "Released under the MIT License.",
    lang_en: "English",
    lang_zh: "中文",
    lang_ja: "日本語",
    lang_ko: "한국어",
  },
  zh: {
    nav_features: "功能特性",
    nav_screenshots: "界面截图",
    nav_usage: "使用方法",
    nav_faq: "常见问题",
    nav_download: "下载",
    hero_tagline: "macOS AI 编程会话监控工具",
    hero_desc: "一款轻量级菜单栏应用，实时监控 Claude Code、Codex 和 OpenCode 的会话活动。无需切换窗口，即可掌握 AI 助手的工作状态。",
    hero_download: "立即下载",
    hero_source: "查看源码",
    features_title: "功能特性",
    feature_realtime_title: "实时监控",
    feature_realtime_desc: "直接从菜单栏追踪所有活跃 AI 编程会话的状态。一目了然地查看运行中、等待输入、空闲和已停止状态。",
    feature_multi_title: "多工具支持",
    feature_multi_desc: "开箱即用地支持 Claude Code、Codex 和 OpenCode。通过一个统一界面监控所有 AI 编程助手。",
    feature_triple_title: "三重数据通道",
    feature_triple_desc: "PTY 包装器、本地插件和进程扫描器三个独立监控通道，确保最大程度的可靠性和准确性。",
    feature_theme_title: "自定义外观",
    feature_theme_desc: "从多种图标样式（圆环、粒子、能量条、冰块网格）和颜色主题中选择，匹配您的个人偏好。",
    feature_plugin_title: "插件管理",
    feature_plugin_desc: "直接在应用内安装、更新和管理 Claude Code 和 OpenCode 的插件，无需手动配置。",
    feature_i18n_title: "多语言支持",
    feature_i18n_desc: "原生支持英语、中文、日语和韩语。界面自动适配您的系统语言。",
    screenshots_title: "界面截图",
    screenshots_menu_caption: "菜单栏下拉菜单显示活跃会话",
    screenshots_settings_caption: "设置面板，支持外观自定义",
    usage_title: "使用方法",
    usage_step1_title: "安装 VibeBar",
    usage_step1_desc: "从 GitHub Releases 下载最新的 DMG 文件，打开后将 VibeBar.app 拖入应用程序文件夹。首次启动时右键选择"打开"。",
    usage_step2_title: "安装插件",
    usage_step2_desc: "打开设置，一键安装 Claude Code 和 OpenCode 的插件。对于 Codex，内置的包装器会自动处理监控。",
    usage_step3_title: "开始编程",
    usage_step3_desc: "像往常一样启动您的 AI 编程工具。VibeBar 会自动检测会话并在菜单栏显示实时状态。",
    usage_step4_title: "监控与自定义",
    usage_step4_desc: "点击菜单栏图标查看所有活跃会话。打开设置自定义图标样式、颜色主题，以及配置开机启动。",
    usage_alt_title: "替代方式：使用包装器命令",
    usage_alt_desc: "您也可以使用 <code>vibebar</code> 包装器命令来启动工具，获得增强的监控效果：",
    faq_title: "常见问题",
    faq_q1: "支持哪些 macOS 版本？",
    faq_a1: "VibeBar 需要 macOS 13 (Ventura) 或更高版本。",
    faq_q2: "VibeBar 会影响 AI 工具的性能吗？",
    faq_a2: "不会。VibeBar 非常轻量，仅读取会话状态数据，CPU 和内存开销几乎可以忽略。",
    faq_q3: "VibeBar 如何检测会话？",
    faq_a3: "VibeBar 使用三个独立通道：挂钩工具事件的专用插件、监控终端输出的 PTY 包装器，以及作为后备的进程扫描器。这种三层方式确保了可靠的检测。",
    faq_q4: "可以将 VibeBar 用于其他工具吗？",
    faq_a4: "目前 VibeBar 支持 Claude Code、Codex 和 OpenCode 三种工具。插件架构设计为可扩展的，未来可能支持更多工具。",
    faq_q5: "VibeBar 是开源的吗？",
    faq_a5: "是的！VibeBar 完全开源。您可以在 GitHub 上查看源码、提交问题和贡献代码。",
    faq_q6: "如何更新 VibeBar？",
    faq_a6: "VibeBar 内置自动更新检查。有新版本时会通知您。您也可以从 GitHub 手动下载最新版本。",
    footer_desc: "轻量级 macOS 菜单栏应用，用于监控 AI 编程会话。",
    footer_links: "链接",
    footer_resources: "资源",
    footer_github: "GitHub",
    footer_releases: "版本发布",
    footer_issues: "问题反馈",
    footer_license: "许可证",
    footer_readme: "自述文件",
    footer_agents: "开发指南",
    footer_copyright: "基于 MIT 许可证发布。",
    lang_en: "English",
    lang_zh: "中文",
    lang_ja: "日本語",
    lang_ko: "한국어",
  },
  ja: {
    nav_features: "機能",
    nav_screenshots: "スクリーンショット",
    nav_usage: "使い方",
    nav_faq: "よくある質問",
    nav_download: "ダウンロード",
    hero_tagline: "macOS AI コーディングセッションモニター",
    hero_desc: "Claude Code、Codex、OpenCode のセッション活動をリアルタイムで監視する軽量メニューバーアプリ。ウィンドウを切り替えることなく、AI アシスタントの状態を把握できます。",
    hero_download: "ダウンロード",
    hero_source: "ソースを見る",
    features_title: "機能",
    feature_realtime_title: "リアルタイム監視",
    feature_realtime_desc: "メニューバーから直接、すべてのアクティブな AI コーディングセッションの状態を追跡。実行中、入力待ち、アイドル、停止の状態を一目で確認できます。",
    feature_multi_title: "マルチツール対応",
    feature_multi_desc: "Claude Code、Codex、OpenCode にすぐに対応。統一されたインターフェースですべての AI コーディングアシスタントを監視できます。",
    feature_triple_title: "トリプルデータチャネル",
    feature_triple_desc: "PTY ラッパー、ローカルプラグイン、プロセススキャナーの3つの独立した監視チャネルにより、最大限の信頼性と精度を確保します。",
    feature_theme_title: "カスタマイズ可能な外観",
    feature_theme_desc: "リング、パーティクル、エナジーバー、アイスグリッドなど複数のアイコンスタイルとカラーテーマから、お好みに合わせて選択できます。",
    feature_plugin_title: "プラグイン管理",
    feature_plugin_desc: "アプリ内で直接 Claude Code と OpenCode のプラグインをインストール、更新、管理。手動設定は不要です。",
    feature_i18n_title: "多言語対応",
    feature_i18n_desc: "英語、中国語、日本語、韓国語をネイティブサポート。システム言語に自動的に適応します。",
    screenshots_title: "スクリーンショット",
    screenshots_menu_caption: "アクティブなセッションを表示するメニューバードロップダウン",
    screenshots_settings_caption: "外観カスタマイズが可能な設定パネル",
    usage_title: "使い方",
    usage_step1_title: "VibeBar をインストール",
    usage_step1_desc: "GitHub Releases から最新の DMG をダウンロードし、VibeBar.app をアプリケーションフォルダにドラッグします。初回起動時は右クリックで「開く」を選択してください。",
    usage_step2_title: "プラグインをインストール",
    usage_step2_desc: "設定を開き、Claude Code と OpenCode のプラグインをワンクリックでインストール。Codex については、内蔵ラッパーが自動的に監視を処理します。",
    usage_step3_title: "コーディング開始",
    usage_step3_desc: "通常通り AI コーディングツールを起動してください。VibeBar が自動的にセッションを検出し、メニューバーにリアルタイムの状態を表示します。",
    usage_step4_title: "監視とカスタマイズ",
    usage_step4_desc: "メニューバーアイコンをクリックして、すべてのアクティブなセッションを確認。設定からアイコンスタイル、カラーテーマ、ログイン時の起動を設定できます。",
    usage_alt_title: "代替方法：ラッパーを使用",
    usage_alt_desc: "<code>vibebar</code> ラッパーコマンドを使用して、強化された監視でツールを起動することもできます：",
    faq_title: "よくある質問",
    faq_q1: "対応している macOS のバージョンは？",
    faq_a1: "VibeBar は macOS 13（Ventura）以降が必要です。",
    faq_q2: "VibeBar は AI ツールのパフォーマンスに影響しますか？",
    faq_a2: "いいえ。VibeBar は非常に軽量で、セッション状態データの読み取りのみを行います。CPU とメモリのオーバーヘッドはほぼゼロです。",
    faq_q3: "VibeBar はどのようにセッションを検出しますか？",
    faq_a3: "VibeBar は3つの独立したチャネルを使用します：ツールイベントにフックする専用プラグイン、ターミナル出力を監視する PTY ラッパー、そしてフォールバックとしてのプロセススキャナーです。",
    faq_q4: "他のツールでも VibeBar を使用できますか？",
    faq_a4: "現在、VibeBar は Claude Code、Codex、OpenCode の3つのツールをサポートしています。プラグインアーキテクチャは拡張可能に設計されており、将来的により多くのツールがサポートされる可能性があります。",
    faq_q5: "VibeBar はオープンソースですか？",
    faq_a5: "はい！VibeBar は完全にオープンソースです。GitHub でソースコードの閲覧、問題の報告、コントリビューションが可能です。",
    faq_q6: "VibeBar をアップデートするには？",
    faq_a6: "VibeBar には自動アップデートチェック機能があります。新しいバージョンが利用可能になると通知されます。GitHub から手動で最新リリースをダウンロードすることもできます。",
    footer_desc: "AI コーディングセッション監視用の軽量 macOS メニューバーアプリ。",
    footer_links: "リンク",
    footer_resources: "リソース",
    footer_github: "GitHub",
    footer_releases: "リリース",
    footer_issues: "問題報告",
    footer_license: "ライセンス",
    footer_readme: "README",
    footer_agents: "開発ガイド",
    footer_copyright: "MIT ライセンスの下で公開されています。",
    lang_en: "English",
    lang_zh: "中文",
    lang_ja: "日本語",
    lang_ko: "한국어",
  },
  ko: {
    nav_features: "기능",
    nav_screenshots: "스크린샷",
    nav_usage: "사용 방법",
    nav_faq: "자주 묻는 질문",
    nav_download: "다운로드",
    hero_tagline: "macOS AI 코딩 세션 모니터",
    hero_desc: "Claude Code, Codex, OpenCode의 세션 활동을 실시간으로 모니터링하는 경량 메뉴 바 앱. 창을 전환하지 않고도 AI 어시스턴트의 상태를 파악할 수 있습니다.",
    hero_download: "다운로드",
    hero_source: "소스 보기",
    features_title: "기능",
    feature_realtime_title: "실시간 모니터링",
    feature_realtime_desc: "메뉴 바에서 직접 모든 활성 AI 코딩 세션의 상태를 추적합니다. 실행 중, 입력 대기, 유휴, 중지 상태를 한눈에 확인할 수 있습니다.",
    feature_multi_title: "멀티 도구 지원",
    feature_multi_desc: "Claude Code, Codex, OpenCode를 기본으로 지원합니다. 통합된 인터페이스에서 모든 AI 코딩 어시스턴트를 모니터링하세요.",
    feature_triple_title: "트리플 데이터 채널",
    feature_triple_desc: "PTY 래퍼, 로컬 플러그인, 프로세스 스캐너의 3가지 독립적인 모니터링 채널로 최대한의 신뢰성과 정확성을 보장합니다.",
    feature_theme_title: "사용자 정의 외관",
    feature_theme_desc: "링, 파티클, 에너지 바, 아이스 그리드 등 다양한 아이콘 스타일과 색상 테마에서 개인 취향에 맞게 선택할 수 있습니다.",
    feature_plugin_title: "플러그인 관리",
    feature_plugin_desc: "앱 내에서 직접 Claude Code와 OpenCode의 플러그인을 설치, 업데이트, 관리할 수 있습니다. 수동 설정이 필요 없습니다.",
    feature_i18n_title: "다국어 지원",
    feature_i18n_desc: "영어, 중국어, 일본어, 한국어를 기본으로 지원합니다. 시스템 언어에 자동으로 적응합니다.",
    screenshots_title: "스크린샷",
    screenshots_menu_caption: "활성 세션을 보여주는 메뉴 바 드롭다운",
    screenshots_settings_caption: "외관 사용자 정의가 가능한 설정 패널",
    usage_title: "사용 방법",
    usage_step1_title: "VibeBar 설치",
    usage_step1_desc: "GitHub Releases에서 최신 DMG를 다운로드하고 VibeBar.app을 응용 프로그램 폴더로 드래그하세요. 처음 실행 시 우클릭하여 '열기'를 선택하세요.",
    usage_step2_title: "플러그인 설치",
    usage_step2_desc: "설정을 열고 Claude Code와 OpenCode의 플러그인을 원클릭으로 설치하세요. Codex의 경우 내장 래퍼가 자동으로 모니터링을 처리합니다.",
    usage_step3_title: "코딩 시작",
    usage_step3_desc: "평소처럼 AI 코딩 도구를 실행하세요. VibeBar가 자동으로 세션을 감지하고 메뉴 바에 실시간 상태를 표시합니다.",
    usage_step4_title: "모니터링 및 사용자 정의",
    usage_step4_desc: "메뉴 바 아이콘을 클릭하여 모든 활성 세션을 확인하세요. 설정에서 아이콘 스타일, 색상 테마, 로그인 시 실행을 구성할 수 있습니다.",
    usage_alt_title: "대안: 래퍼 사용",
    usage_alt_desc: "<code>vibebar</code> 래퍼 명령을 사용하여 향상된 모니터링으로 도구를 시작할 수도 있습니다:",
    faq_title: "자주 묻는 질문",
    faq_q1: "지원되는 macOS 버전은?",
    faq_a1: "VibeBar는 macOS 13 (Ventura) 이상이 필요합니다.",
    faq_q2: "VibeBar가 AI 도구의 성능에 영향을 미치나요?",
    faq_a2: "아니요. VibeBar는 매우 가볍고 세션 상태 데이터만 읽습니다. CPU와 메모리 오버헤드가 거의 없습니다.",
    faq_q3: "VibeBar는 어떻게 세션을 감지하나요?",
    faq_a3: "VibeBar는 3가지 독립 채널을 사용합니다: 도구 이벤트에 연결하는 전용 플러그인, 터미널 출력을 모니터링하는 PTY 래퍼, 그리고 대체 수단으로서의 프로세스 스캐너입니다.",
    faq_q4: "다른 도구에서도 VibeBar를 사용할 수 있나요?",
    faq_a4: "현재 VibeBar는 Claude Code, Codex, OpenCode 세 가지 도구를 지원합니다. 플러그인 아키텍처는 확장 가능하도록 설계되어 향후 더 많은 도구가 지원될 수 있습니다.",
    faq_q5: "VibeBar는 오픈소스인가요?",
    faq_a5: "네! VibeBar는 완전한 오픈소스입니다. GitHub에서 소스 코드를 확인하고 이슈를 제출하고 기여할 수 있습니다.",
    faq_q6: "VibeBar를 업데이트하려면?",
    faq_a6: "VibeBar에는 자동 업데이트 확인 기능이 포함되어 있습니다. 새 버전이 출시되면 알림을 받습니다. GitHub에서 직접 최신 릴리스를 다운로드할 수도 있습니다.",
    footer_desc: "AI 코딩 세션 모니터링을 위한 경량 macOS 메뉴 바 앱.",
    footer_links: "링크",
    footer_resources: "리소스",
    footer_github: "GitHub",
    footer_releases: "릴리스",
    footer_issues: "이슈",
    footer_license: "라이선스",
    footer_readme: "README",
    footer_agents: "개발 가이드",
    footer_copyright: "MIT 라이선스로 배포됩니다.",
    lang_en: "English",
    lang_zh: "中文",
    lang_ja: "日本語",
    lang_ko: "한국어",
  },
};

const supportedLangs = ["en", "zh", "ja", "ko"];

function detectLanguage() {
  const saved = localStorage.getItem("vibebar-lang");
  if (saved && supportedLangs.includes(saved)) return saved;

  const browserLang = navigator.language || navigator.userLanguage || "en";
  const lang = browserLang.split("-")[0].toLowerCase();
  return supportedLangs.includes(lang) ? lang : "en";
}

function setLanguage(lang) {
  if (!supportedLangs.includes(lang)) lang = "en";
  localStorage.setItem("vibebar-lang", lang);
  document.documentElement.lang = lang;
  applyTranslations(lang);
  updateLangSelector(lang);
}

function applyTranslations(lang) {
  const t = translations[lang] || translations.en;
  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (t[key]) {
      if (el.tagName === "INPUT" || el.tagName === "TEXTAREA") {
        el.placeholder = t[key];
      } else {
        el.innerHTML = t[key];
      }
    }
  });
}

function updateLangSelector(lang) {
  document.querySelectorAll(".lang-option").forEach((el) => {
    el.classList.toggle("active", el.dataset.lang === lang);
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const lang = detectLanguage();
  setLanguage(lang);

  document.querySelectorAll(".lang-option").forEach((el) => {
    el.addEventListener("click", (e) => {
      e.preventDefault();
      setLanguage(el.dataset.lang);
    });
  });
});
